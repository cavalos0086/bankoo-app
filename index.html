<html ng-app="bankooTest">
	<head>
		<script src="bower_components/angular/angular.min.js"></script>
		<script>
angular.module("bankooTest", [])
	.run(function(){
		if(window.PaymentRequest) {
			initPaymentRequestApi();
		} else {
			console.log("Payment Request Not Found");
		}

		function initPaymentRequestApi() {
			var supportedPaymentMethods = [{
				supportedMethods: ["https://oceanhuang-github-io-bankoo.herokuapp.com/"],
				data: {
					customKey: {
						theKey1: 'theKey',
						theKey2: 'theSameThingKey',
						theKey3: 'theKey',
						theKey4: 'theKey',
						theKey6: 'theKey',
						theKey14: 'theKey',
						theKey9: 'theKey',
						theKey7: 'theKey',
						theKey21: 'theKey',
						theKey13: 'theKey',
						theKey20: 'theKey',
						theKey15: 'theKey',
						theKey20: 'theKey'
					}
				},
			}];

			var paymentDetails = {  
				total: {  
					label: 'null',  
					amount: {  
						currency: 'null',  
						value: 'null',  
					},  
				},  
			};

			window.paymentRequest = new window.PaymentRequest(supportedPaymentMethods, paymentDetails);
			window.paymentRequest.canMakePayment().then(function(result){
				console.log(result);
			})
		}
	})
	.controller("mainController", function(){
		var vm = this;
		vm.isSecureContext = window.isSecureContext;
		vm.handleClick = handleClick;
		if(window.PaymentRequest){
			window.paymentRequest.canMakePayment().then(function(result){
				console.log(result);
				vm.canMakePayment = result;
			});
		}
		function handleClick(e){
			window.paymentRequest.show().then(function(result){
				console.log("RESULT");
				console.log(result);
			})
		}
	});
		</script>
	</head>
	<body ng-controller="mainController as vm">
		<h1>Is Secure Context {{vm.isSecureContext}}</h1>
		<h1>Can Make Payment {{vm.canMakePayment}}</h1>
		<h1>{{vm.failed}}</h1>
		<button ng-click="vm.handleClick()">Send Request</button>
	</body>
</html>
